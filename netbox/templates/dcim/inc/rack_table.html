{% load render_table from django_tables2 %}
{% if perms.dcim.change_rack or perms.dcim.delete_rack %}
    <form method="post" class="form form-horizontal">
        {% csrf_token %}
        <input type="hidden" name="redirect_url" value="{{ request.path }}{% if request.GET %}?{{ request.GET.urlencode }}{% endif %}" />
        {% render_table table table_template|default:'table.html' %}
        {% if perms.dcim.change_rack %}
            <button type="submit" name="_edit" formaction="{% url 'dcim:rack_bulk_edit' %}" class="btn btn-warning btn-sm">
                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                Edit Selected
            </button>
        {% endif %}
        {% if perms.dcim.delete_rack %}
            <button type="submit" name="_delete" formaction="{% url 'dcim:rack_bulk_delete' %}" class="btn btn-danger btn-sm">
                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                Delete Selected
            </button>
        {% endif %}
    </form>
{% else %}
    {% render_table table table_template|default:'table.html' %}
{% endif %}
